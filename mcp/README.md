# Camera MCP - æ‘„åƒå¤´æ§åˆ¶ç³»ç»Ÿ

åŸºäº Model Context Protocol (MCP) çš„æ™ºèƒ½æ‘„åƒå¤´æ§åˆ¶ç³»ç»Ÿï¼Œæ”¯æŒé€šè¿‡ AI è‡ªç„¶è¯­è¨€æŒ‡ä»¤æ§åˆ¶æ‘„åƒå¤´ã€‚

## åŠŸèƒ½ç‰¹æ€§

### MCP Server
- ğŸ¥ æ‘„åƒå¤´æ°´å¹³/å‚ç›´è½¬åŠ¨æ§åˆ¶
- ğŸ“¸ æ‘„åƒå¤´æ‹ç…§åŠŸèƒ½
- ğŸ” æ‘„åƒå¤´å˜ç„¦æ§åˆ¶
- ğŸ“ é¢„è®¾ç‚¹ä½ç§»åŠ¨
- âš™ï¸ å›¾åƒå‚æ•°è°ƒæ•´ï¼ˆäº®åº¦ã€å¯¹æ¯”åº¦ã€é¥±å’Œåº¦ï¼‰
- ğŸ”§ æ‘„åƒå¤´è¿æ¥é…ç½®

### MCP Client
- ğŸ¤– AI æ™ºèƒ½æ§åˆ¶ï¼ˆæ”¯æŒè‡ªç„¶è¯­è¨€æŒ‡ä»¤ï¼‰
- ğŸ”§ ç›´æ¥å·¥å…·è°ƒç”¨
- ğŸ“Š æ‘„åƒå¤´çŠ¶æ€æŸ¥è¯¢
- ğŸ’¬ äº¤äº’å¼å‘½ä»¤è¡Œç•Œé¢
- ğŸ”— ç‹¬ç«‹æ¨¡å‹é…ç½®

## é¡¹ç›®ç»“æ„

```
camera-mcp/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ camera_mcp/
â”‚       â”œâ”€â”€ __init__.py          # åŒ…åˆå§‹åŒ–
â”‚       â”œâ”€â”€ camera_server.py     # MCP Server å®ç°
â”‚       â”œâ”€â”€ camera_client.py     # MCP Client å®ç°
â”‚       â”œâ”€â”€ cli.py               # å‘½ä»¤è¡Œæ¥å£
â”‚       â””â”€â”€ utils/
â”‚           â”œâ”€â”€ __init__.py
â”‚           â”œâ”€â”€ Camera.py        # æ‘„åƒå¤´æ§åˆ¶ç±»
â”‚           â””â”€â”€ test.py          # åŸå§‹æµ‹è¯•è„šæœ¬
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ test_mcp_system.py       # ç³»ç»Ÿæµ‹è¯•
â”œâ”€â”€ docs/                        # æ–‡æ¡£ç›®å½•
â”œâ”€â”€ config.json                  # é…ç½®æ–‡ä»¶
â”œâ”€â”€ pyproject.toml               # é¡¹ç›®é…ç½®
â”œâ”€â”€ README.md                    # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ start_camera_system.py       # å…¼å®¹æ€§å¯åŠ¨è„šæœ¬
```

## å®‰è£…

### ä½¿ç”¨ uv (æ¨è)

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd camera-mcp

# å®‰è£…ä¾èµ–
uv sync

# å¼€å‘æ¨¡å¼å®‰è£…
uv sync --dev
```

### ä½¿ç”¨ pip

```bash
# å®‰è£…å‘å¸ƒç‰ˆæœ¬
pip install camera-mcp

# æˆ–ä»æºç å®‰è£…
pip install -e .

# å®‰è£…å¼€å‘ä¾èµ–
pip install -e .[dev]
```

## é…ç½®

ç³»ç»Ÿä½¿ç”¨é¡¹ç›®æ ¹ç›®å½•çš„ `config.json` æ–‡ä»¶è¿›è¡Œé…ç½®ï¼š

```json
{
  "mcp_model": {
    "api_key": "your-openai-api-key",
    "base_url": "https://api.openai.com/v1",
    "model": "gpt-4",
    "temperature": 0.1,
    "max_tokens": 1000
  },
  "camera": {
    "default_ip": "192.168.1.64",
    "default_admin": "admin",
    "default_password": "pw4hkcamera"
  }
}
```

æ³¨æ„ï¼š`mcp_model` é…ç½®ç‹¬ç«‹äº VLM ç›‘æ§ç³»ç»Ÿçš„ `vlm` é…ç½®ï¼Œä¸¤è€…ä½¿ç”¨ä¸åŒçš„æ¨¡å‹å’Œå‚æ•°ã€‚

## ä½¿ç”¨æ–¹æ³•

### å‘½ä»¤è¡Œæ¥å£ (æ¨è)

```bash
# å¯åŠ¨ MCP Server
camera-mcp server

# å¯åŠ¨ MCP Client (åœ¨å¦ä¸€ä¸ªç»ˆç«¯)
camera-mcp client

# è¿è¡Œç³»ç»Ÿæµ‹è¯•
camera-mcp test

# æŸ¥çœ‹å¸®åŠ©
camera-mcp --help
```

### å…¼å®¹æ€§è„šæœ¬

```bash
# ä½¿ç”¨æ—§çš„å¯åŠ¨è„šæœ¬ (å·²å¼ƒç”¨)
python start_camera_system.py server
python start_camera_system.py client
python start_camera_system.py test
```

### ç¼–ç¨‹æ¥å£

```python
from camera_mcp import CameraClient, run_server, run_client

# åˆ›å»ºå®¢æˆ·ç«¯
client = CameraClient()

# æˆ–ç›´æ¥è¿è¡ŒæœåŠ¡å™¨/å®¢æˆ·ç«¯
await run_server()
await run_client()
```

## å®¢æˆ·ç«¯ä½¿ç”¨

å®¢æˆ·ç«¯å¯åŠ¨åï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼æ§åˆ¶æ‘„åƒå¤´ï¼š

### AI æ™ºèƒ½æ§åˆ¶ï¼ˆæ¨èï¼‰
ç›´æ¥è¾“å…¥è‡ªç„¶è¯­è¨€æŒ‡ä»¤ï¼š
```
å‘å·¦è½¬åŠ¨3ç§’
æ‹ä¸€å¼ ç…§ç‰‡
æ”¾å¤§é•œå¤´
ç§»åŠ¨åˆ°é¢„è®¾ç‚¹ä½1
è°ƒæ•´äº®åº¦åˆ°80
```

### ç›´æ¥å·¥å…·è°ƒç”¨
```
call pan_tilt_move {"pan_speed": -50, "tilt_speed": 0, "duration": 3}
call capture_image {"img_name": "test.jpg"}
call zoom_control {"zoom_level": 10, "duration": 2}
```

### åŸºæœ¬å‘½ä»¤
```
help     - æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
status   - æŸ¥çœ‹æ‘„åƒå¤´çŠ¶æ€
tools    - åˆ—å‡ºå¯ç”¨å·¥å…·
quit     - é€€å‡ºç¨‹åº
```

## å¯ç”¨å·¥å…·

### `setup_camera`
è®¾ç½®æ‘„åƒå¤´è¿æ¥å‚æ•°
- `ip`: æ‘„åƒå¤´IPåœ°å€
- `admin`: ç”¨æˆ·å
- `password`: å¯†ç 

### `pan_tilt_move`
æ§åˆ¶æ‘„åƒå¤´æ°´å¹³å’Œå‚ç›´è½¬åŠ¨
- `pan_speed`: æ°´å¹³é€Ÿåº¦ (-100 åˆ° 100ï¼Œæ­£æ•°å³è½¬ï¼Œè´Ÿæ•°å·¦è½¬)
- `tilt_speed`: å‚ç›´é€Ÿåº¦ (-100 åˆ° 100ï¼Œæ­£æ•°ä¸Šå‡ï¼Œè´Ÿæ•°ä¸‹é™)
- `duration`: æŒç»­æ—¶é—´ï¼ˆç§’ï¼‰

### `capture_image`
æ‘„åƒå¤´æ‹ç…§
- `img_name`: å›¾ç‰‡åç§°ï¼ˆå¯é€‰ï¼Œä¸ºç©ºåˆ™è‡ªåŠ¨ç”Ÿæˆï¼‰

### `goto_preset`
ç§»åŠ¨åˆ°é¢„è®¾ç‚¹ä½
- `point`: é¢„è®¾ç‚¹ä½ç¼–å·

### `zoom_control`
æ§åˆ¶æ‘„åƒå¤´å˜ç„¦
- `zoom_level`: å˜ç„¦çº§åˆ«ï¼ˆæ­£æ•°æ”¾å¤§ï¼Œè´Ÿæ•°ç¼©å°ï¼‰
- `duration`: æŒç»­æ—¶é—´ï¼ˆç§’ï¼‰

### `adjust_image_settings`
è°ƒæ•´å›¾åƒè®¾ç½®
- `brightness`: äº®åº¦ (0-100)
- `contrast`: å¯¹æ¯”åº¦ (0-100)
- `saturation`: é¥±å’Œåº¦ (0-100)

## å¼€å‘

### è¿è¡Œæµ‹è¯•

```bash
# ä½¿ç”¨ pytest
pytest tests/

# æˆ–ä½¿ç”¨å†…ç½®æµ‹è¯•
camera-mcp test
```

### ä»£ç æ ¼å¼åŒ–

```bash
# ä½¿ç”¨ black
black src/ tests/

# ä½¿ç”¨ isort
isort src/ tests/

# ä½¿ç”¨ ruff
ruff check src/ tests/
```

### ç±»å‹æ£€æŸ¥

```bash
mypy src/
```

## æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    MCP Protocol    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MCP Client    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚   MCP Server    â”‚
â”‚                 â”‚                    â”‚                 â”‚
â”‚ - AI æ§åˆ¶       â”‚                    â”‚ - æ‘„åƒå¤´æ§åˆ¶    â”‚
â”‚ - OpenAI é›†æˆ   â”‚                    â”‚ - å·¥å…·å®ç°      â”‚
â”‚ - äº¤äº’ç•Œé¢      â”‚                    â”‚ - èµ„æºç®¡ç†      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                       â”‚
         â”‚                                       â”‚
         â–¼                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   OpenAI API    â”‚                    â”‚   Camera API    â”‚
â”‚                 â”‚                    â”‚                 â”‚
â”‚ - æŒ‡ä»¤è§£æ      â”‚                    â”‚ - HTTP æ§åˆ¶     â”‚
â”‚ - JSON ç”Ÿæˆ     â”‚                    â”‚ - RTSP æµ       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **è¿æ¥å¤±è´¥**
   - æ£€æŸ¥æ‘„åƒå¤´IPåœ°å€å’Œç½‘ç»œè¿æ¥
   - ç¡®è®¤ç”¨æˆ·åå’Œå¯†ç æ­£ç¡®
   - æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

2. **AI æ§åˆ¶å¤±è´¥**
   - æ£€æŸ¥ OpenAI API å¯†é’¥é…ç½®
   - ç¡®è®¤ç½‘ç»œè¿æ¥æ­£å¸¸
   - æŸ¥çœ‹æ—¥å¿—è¾“å‡ºè·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯

3. **MCP è¿æ¥é—®é¢˜**
   - ç¡®ä¿ MCP Server æ­£åœ¨è¿è¡Œ
   - æ£€æŸ¥ Python ç¯å¢ƒå’Œä¾èµ–å®‰è£…
   - æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯è¾“å‡º

### æ—¥å¿—æŸ¥çœ‹

ç³»ç»Ÿä¼šåœ¨æ§åˆ¶å°è¾“å‡ºè¯¦ç»†çš„æ—¥å¿—ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š
- è¿æ¥çŠ¶æ€
- å·¥å…·è°ƒç”¨ç»“æœ
- é”™è¯¯ä¿¡æ¯
- AI å“åº”å†…å®¹

## è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº MIT è®¸å¯è¯å¼€æºã€‚

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## æ›´æ–°æ—¥å¿—

### v0.1.0
- åˆå§‹ç‰ˆæœ¬
- åŸºæœ¬çš„ MCP Server å’Œ Client åŠŸèƒ½
- AI æ™ºèƒ½æ§åˆ¶æ”¯æŒ
- å®Œæ•´çš„æ‘„åƒå¤´æ§åˆ¶å·¥å…·é›† 